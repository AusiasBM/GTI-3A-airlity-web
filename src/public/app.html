<!--

    @Author Ausias Bañuls Mahiques

    @description Este fichero contiene toda la landing page de Airlity

 -->

 <!DOCTYPE html>
 <html lang="es">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
     <meta http-equiv="x-ua-compatible" content="ie=edge">
     <title>Airlity - Dashboard</title>
 
     <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
     <link rel="stylesheet" type="text/css" href="css/estilos.css">
 
     <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />   

 </head>
 <body class="container-fluid d-flex bd-highlight">
 
     <!-- Nav init ************************************************************* 
     <nav id="menuPrincipal" class="navbar navbar-light bg-light fixed-top">
         <!-- Contenido en menu.js -->
     </nav><!-- Nav end ************************************************************* -->
 
     <div class="menu_lateral bg-body shadow-lg ps-5 pt-3">
         <a class="navbar-brand" href="index.html">
             <img src="img/logo_airlity_hor.png" class="logo" alt="logotipo Airlity">
         </a>
 
         <div class="d-flex align-items-start mt-4">
             <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                 <button class="nav-link shadow-sm mt-3 rounded-pill active"          id="v-mapa-tab"                     data-bs-toggle="pill" data-bs-target="#v-mapa"                      type="button" role="tab" aria-controls="v-mapa"                     aria-selected="false">Mapa</button>
                 <button class="nav-link shadow-sm mt-3 rounded-pill"          id="btn-dashboard"      data-bs-toggle="pill" data-bs-target="#v-pills-dashboard"       type="button" role="tab" aria-controls="v-pills-dashboard"      aria-selected="false">Dashboard</button>
                 <button class="nav-link shadow-sm mt-3 rounded-pill"          id="btn-perfil"      data-bs-toggle="pill" data-bs-target="#v-pills-perfil"       type="button" role="tab" aria-controls="v-pills-perfil"      aria-selected="false">Perfil</button>
                 <button class="nav-link shadow-sm mt-3 rounded-pill invisible"          id="btn-sensores"      data-bs-toggle="pill" data-bs-target="#v-pills-sensores"       type="button" role="tab" aria-controls="v-pills-sensores"      aria-selected="false">Sensores</button>
                 <button type="button" onclick="cerrarSesion()" class="btn btn-outline-danger login rounded-pill position-absolute bottom-0 mb-5" id="btn-cerrarSesion">
                    Cerrar Sesión
                </button>
             </div>
         </div>
     </div>
     
     <div class="tab-content m-5 flex-fill" id="v-pills-tabContent">

         <!-- Página de Mapa START ************************************************************************************************************************************************-->
         <div class="tab-pane fade" id="v-mapa" role="tabpanel" aria-labelledby="v-mapa-tab">
            <div class="row mb-3">
                 <p class="col">
                     <img class="me-3" src="img/ica.gif" width="30" alt="logotipo GTI">
                     ICA · 
                     <span id="estadoIca">Moderado</span>
                 </p>
                 <p class="col">
                     <img class="me-3" src="img/o3.png" width="30" alt="logotipo GTI">
                     O3 · 
                     <span id="estadoO3">Moderado</span>
                 </p>
                 <p class="col">
                     <img class="me-3" src="img/so2.png" width="30" alt="logotipo GTI">
                     SO2 · 
                     <span id="estadoSo2">Moderado</span>
                 </p>
                 <p class="col">
                     <img class="me-3" src="img/no2.png" width="30" alt="logotipo GTI">
                     NO2 · 
                     <span id="estadoNo2">Moderado</span>
                 </p>
                 <p class="col">
                     <img class="me-3" src="img/co.png" width="30" alt="logotipo GTI">
                     CO · 
                     <span id="estadoCo">Moderado</span>
                 </p>
            </div>

            <hr>


            
            <div class="row my-4">
                <h5 class="col-1">Filtros</h5>
                <div class="col-4 dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
                    Tipo de contamiante: Ninguno
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                    <li><button class="dropdown-item" type="button" onclick="tipoMedicion('Ninguno')">Ninguno</button></li>
                    <li><button class="dropdown-item" type="button" onclick="tipoMedicion('IAQ')">IAQ (TODAS)</button></li>
                    <li><button class="dropdown-item" type="button" onclick="tipoMedicion('SO2')"">SO2</button></li>
                    <li><button class="dropdown-item" type="button" onclick="tipoMedicion('O3')"">O3</button></li>
                    <li><button class="dropdown-item" type="button" onclick="tipoMedicion('NO2')"">NO2</button></li>
                    <li><button class="dropdown-item" type="button" onclick="tipoMedicion('CO')"">CO</button></li>
                    </ul>
                </div>


                <input class="col" type="text" name="daterange" value="12/12/2021 - 01/01/2022" />

            </div>
            
            <p id="errorFiltros"></p>

            <hr>

             <div class="mt-3"> <!-- Mapa de Google maps init -->
                 <!-- <div id="floating-panel">
                     <button id="toggle-heatmap">Toggle Heatmap</button>
                     <button id="change-gradient">Change gradient</button>
                     <button id="change-radius">Change radius</button>
                     <button id="change-opacity">Change opacity</button>
                   </div> -->
                   <div id="map" class="shadow"></div>
 
             </div> <!-- Mapa de Google maps end -->
         </div>
         <!-- Página de Mapa END-->
 
         <!-- Página de Dashboard START ************************************************************************************************************************************************-->
         <div class="tab-pane fade show active" id="v-pills-dashboard" role="tabpanel" aria-labelledby="v-pills-dashboard-tab">
     
             <h1>
                Tus Medidas
             </h1>
            
             <div class="row mt-5">
 
                <div class="col-6">
                    <h3>Listado de mediciones</h3>
                    <button type="button" onclick="obtenerUltimasMediciones()" class="btn btn-dark login rounded" id="btn-cerrarSesion">
                        Listar Mediciones
                    </button>
                    <hr>
                    <div id="listaMediciones">
                        
                    </div>
                </div>
                
                <div class="col-6">
                    <h3>Gráficas de mediciones</h3>
                    <button type="button" onclick="datosGraficaUsuario()" class="btn btn-dark login rounded" id="btn-cerrarSesion">
                        Generar gráfica
                    </button>
                    <hr>
                    <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
                    <div id="datosEstadisticos" class="mt-4">

                    </div>
                </div>
                
             </div>
             
         </div>
         <!-- Página de Dashboard END -->
 
        <!-- Página de Perfil START ************************************************************************************************************************************************-->
        <div class="tab-pane fade" id="v-pills-perfil" role="tabpanel" aria-labelledby="v-pills-perfil-tab">

            <h1 id="nombrePerfil">
                Hola, 
            </h1>


            <div class="row bg-light rounded p-5 shadow mt-4">
                <div class="col-6 my-3">
                    <h3>Correo</h3>
                    <p id="correoUsuario">ausiasbm@gmail.com</p>
                </div>
                <div class="col-6 my-3">
                    <h3>Nombre</h3>
                    <p id="nombreUsuario">ausiasbm</p>
                </div>
                <div class="col-6 my-3">
                    <h3>Teléfono</h3>
                    <p id="telefonoUsuario">a654765234</p>
                </div>
                <div class="col-6 my-3">
                    <h3>Permisos</h3>
                    <p id="rolUsuario">Usuario</p>
                </div>
                <div class="col-12 my-3">
                    <h3>Mac Sensor</h3>
                    <p id="macSensor">00:00:00:00</p>
                </div>
                
            </div>

            <script>
                document.getElementById('nombrePerfil').innerHTML += `${sessionStorage.getItem('nombreUsuario')} `
                document.getElementById('correoUsuario').innerHTML = `${sessionStorage.getItem('correo')} `
                document.getElementById('nombreUsuario').innerHTML = `${sessionStorage.getItem('nombreUsuario')} `
                document.getElementById('telefonoUsuario').innerHTML = `${sessionStorage.getItem('telefono')} `
                document.getElementById('rolUsuario').innerHTML = `${sessionStorage.getItem('rol')} `
                document.getElementById('macSensor').innerHTML = `${sessionStorage.getItem('macSensor')} `
                //console.log(sessionStorage.getItem('nombreUsuario'))
            </script>
            
        </div>
        <!-- Página de Perfil END -->
 
        <!-- Página de Sensores START ************************************************************************************************************************************************-->
        <div class="tab-pane fade" id="v-pills-sensores" role="tabpanel" aria-labelledby="v-pills-sensores-tab">

            <h1>
                Sensores - Hola Admin
            </h1>

            <div class="row mt-5">
 
                <div class="col-6">
                    <h4>Listado sensores inactivos</h4>
                    <button type="button" onclick="sensoresInactivos()" class="btn btn-dark login rounded" id="btn-cerrarSesion">
                        Listar inactivos
                    </button>
                    <hr>
                    <div id="listaInactivos">
                        
                    </div>
                </div>
                
                <div class="col-6">
                    <h4>Listado sensores con datos erroneos</h4>
                    <button type="button" onclick="informeSensores()" class="btn btn-dark login rounded" id="btn-cerrarSesion">
                        Listar erroneos
                    </button>
                    <hr>
                    <div id="listaDatosErroneos">
                        
                    </div>
                </div>

            </div>
            
        </div>
        <!-- Página de Sensores END -->

     </div>
 





     <script src="js/login.js"></script>

     <script>

        if(sessionStorage.getItem('rol') == 'Admin'){
            document.querySelector('#btn-sensores').classList.replace('invisible', 'visible');
        }
     </script> 
 
     <!-- Configuración Mapa de Google -->
     <script src="js/mapa.js"></script>
 
     <!-- Clave para el mapa de google maps -->
     <script async defer
         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZCU2KPOv7bCOaxh6jguSW-KpSY_5sU3E&callback=initMap&libraries=visualization&v=weekly"
     ></script>
 
     <script src="js/logicaFake.js"></script>
 
 <!--
     <script type="text/javascript"
         src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZCU2KPOv7bCOaxh6jguSW-KpSY_5sU3E&libraries=visualization">
     </script>
 -->
     <!-- Archivos para mapa leaflet -->
     <!--<script type='text/javascript' src='maps/markers.json'></script>
     <script type='text/javascript' src='maps/leaf-demo.js'></script>
     <script type="text/javascript" src="maps/markers.js"></script>-->
 
     <!-- Bootstrap -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script> 
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
         
 </body>
 </html>